

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Data Pass-through &mdash; Teflo 1.9.1 documentation</title>
  

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/theme_override.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../../../../',
              VERSION:'1.9.1',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home" alt="Documentation Home"> Teflo
          

          
          </a>

          
            
            
              <div class="version">
                1.9.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Installation &amp; Configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../users/install.html">Install Teflo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../users/configuration.html">Configure Teflo</a></li>
</ul>
<p class="caption"><span class="caption-text">Using Teflo</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../users/index.html">User’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../users/index.html#detailed-information">Detailed Information</a></li>
</ul>
<p class="caption"><span class="caption-text">Teflo Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../developers/index.html">Developer’s Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../contact.html">Contacts</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Teflo</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Data Pass-through</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../../_sources/.examples/orchestrate/ansible/data_pass_through/README.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="data-pass-through">
<h1>Data Pass-through<a class="headerlink" href="#data-pass-through" title="Permalink to this headline">¶</a></h1>
<p>This example demonstrates how you can perform configuration against test
machines by ansible using teflo with passing data between orchestrate actions.</p>
<p><strong>ATTENTION</strong></p>
<p>This example below has teflo installed in a virtual environment named teflo.
Please replace this virtual environment with the virtual environment you
created for teflo if it differs.</p>
<div class="section" id="pre-run">
<h2>Pre-Run<a class="headerlink" href="#pre-run" title="Permalink to this headline">¶</a></h2>
<p>First lets review the content of the <a class="reference external" href="scenario.yml">scenario descriptor file</a>.
This file contains a provision section which contains one host resource
defined. For the case of keeping this example simple, the host resource is
the localhost where teflo will be run. This way we can avoid any provisioning
of machines. The orchestrate section contains two actions to be processed.
Each action is an ansible playbook to be run. Each action has a <em>hosts</em> key
which defines which host resource to be run against (defined in the provision
section).</p>
</div>
<div class="section" id="run">
<h2>Run<a class="headerlink" href="#run" title="Permalink to this headline">¶</a></h2>
<div class="section" id="option-1">
<h3>Option 1<a class="headerlink" href="#option-1" title="Permalink to this headline">¶</a></h3>
<p>To configure the machines under test, just run the following teflo command.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(teflo) $ teflo run -t provision -t orchestrate -s scenario.yml
</pre></div>
</div>
<p>You will see teflo skip over provisioning the machine due to its a static
machine. Orchestrate task will start and execute both the actions defined
against the hosts it was declared against. This example will first installing
product a and then go on to install product b. Product b installation requires
data from product a. The product a playbook will set facts that are persistent
and can be accessed by the product b install playbook.</p>
<p>To cleanup the machine, just execute the following teflo command below.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(teflo) $ teflo run -t cleanup -s .teflo/.results/results.yml -w .
</pre></div>
</div>
<p>We pointed teflo to the updated descriptor file. This provides teflo with
the updated information from the provision/orchestrate task. Please note
nothing will be deleted due to the host resource was static.</p>
</div>
<div class="section" id="option-2">
<h3>Option 2<a class="headerlink" href="#option-2" title="Permalink to this headline">¶</a></h3>
<p>Within this directory is a script that wraps all the teflo commands to provide
an easy way showing how to run teflo (for a demo purpose).</p>
<p>You can run the script to orchestrate/cleanup as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># you will need to provide the data to the prompts
(teflo) $ ./run.sh
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Red Hat Inc.

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>